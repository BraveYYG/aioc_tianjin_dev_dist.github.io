webpackJsonp([67],{Gtko:function(e,t,a){(e.exports=a("FZ+f")(!0)).push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"index.vue",sourceRoot:""}])},OkRt:function(e,t,a){var l=a("Gtko");"string"==typeof l&&(l=[[e.i,l,""]]),l.locals&&(e.exports=l.locals);a("rjj0")("260e0d00",l,!1,{})},RMV5:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("woOf"),o=a.n(l),r=a("Dd8w"),s=a.n(r),i=a("hmat"),n=a("sxQs"),c=a("NYxO"),u=a("P9l9"),h={name:"VolunteerList",data:function(){return{ops:{vuescroll:{},scrollPanel:{scrollingX:!1},bar:{background:"#eee"}},isSearchLoading:!1,columns:[{label:"分组",prop:"grouping"},{label:"志愿者姓名",prop:"volunteerName"},{label:"志愿者类型",prop:"volunteerType"},{label:"联系电话",prop:"volunteerPhone"},{label:"探访对象姓名",prop:"visitObjectName"},{label:"探访对象身份证号",prop:"visitObjectIdcard"},{label:"探访对象年龄",prop:"visitObjectAge"},{label:"探访对象联系电话",prop:"visitObjectPhone"},{label:"探访对象家庭住址",prop:"visitObjectAddress"},{label:"探访对象所属类型",prop:"visitObjectType"},{label:"所属街道",prop:"streetName"},{label:"所属社区",prop:"communityName"}],tableData:[],volunteerTypeList:[{label:"党员",value:"党员"},{label:"志愿者",value:"志愿者"},{label:"社区党员",value:"社区党员"},{label:"网格员",value:"网格员"},{label:"老协会长",value:"老协会长"}],visitObjectTypeList:[{label:"空巢",value:"空巢"},{label:"独居",value:"独居"},{label:"失独",value:"失独"},{label:"孤老",value:"孤老"},{label:"残疾",value:"残疾"},{label:"孤寡",value:"孤寡"},{label:"失能",value:"失能"},{label:"半失能",value:"半失能"}],fullscreen:!0,index:1,total:0,selectedLocation:this.$route.query.code&&"string"!=typeof this.$route.query.code?this.$route.query.code.slice(1):[],locationOptions:[],locationProps:{value:"code",label:"name",children:"childs"},formData:{pageSize:10,currentPage:1,zoneCode:this.$route.query.code&&"string"!=typeof this.$route.query.code?this.$route.query.code[1]||"":null,streetCode:this.$route.query.code&&"string"!=typeof this.$route.query.code?this.$route.query.code[2]||"":null,communityCode:this.$route.query.code&&"string"!=typeof this.$route.query.code?this.$route.query.code[3]||"":null,volunteerType:this.$route.query.volunteerType||"",volunteerName:"",volunteerPhone:"",visitObjectName:"",visitObjectIdcard:"",visitObjectPhone:""}}},computed:s()({},Object(c.b)(["typeNew","codeNew","breadCrumbCodes"]),{params:function(){var e={};return e[["code","zoneCode","streetCode","communityCode"][this.typeNew-1]]=this.codeNew[0],e}}),created:function(){var e=this;this.$store.dispatch("getUserAuthInfo").then(function(){e.handleGetSearchValue(),e.getLocation()}).catch(function(e){console.log("获取用户权限失败",e)})},methods:{handleGetSearchValueTo:function(e){this.formData.page=e,this.handleGetSearchValue()},handleGetSearchValue:function(){var e=this;this.isSearchLoading=!0,this.formData.page=this.formData.page||1;var t=o()({},this.formData,this.params);u.a.getVolunteerInfoPageList(t).then(function(t){e.isSearchLoading=!1;var a=t&&t.obj,l=a.records,o=a.total,r=a.size;a.current;e.tableData=l,e.formData.pageSize=r,e.total=o}).catch(function(){e.isSearchLoading=!1})},handleChangeLocation:function(e){"3"==this.$store.state.userType?(this.formData.streetCode=e[0]||null,this.formData.communityCode=e[1]||null):"4"==this.$store.state.userType?this.formData.communityCode=e[0]||null:(this.formData.zoneCode=e[0],this.formData.streetCode=e[1]||null,this.formData.communityCode=e[2]||null)},getLocation:function(){var e=this;u.a.getLocationList().then(function(t){var a=t.data,l=e.$store.state.code[0]||"";if(a&&a.length>0){var o=a.filter(function(e){return"河西区"==e.name})[0].childs,r=l?e.getLocalListByCode(o,l):[];e.locationOptions=r.length>0?r:o}}).catch(function(){console.log("查询片区数据失败")})},getLocalListByCode:function(e,t){var a=[];return function e(l){var o=[];if(l&&(o=l.filter(function(a){return a.code==t||!!(a.childs&&a.childs.length>0)&&void e(a.childs)})).length>0)return a=o,!1}(e),a},handleServiceClass:function(){this.currentPage=1},clearSearchValue:function(){this.formData=o()({},this.formData,{volunteerType:"",volunteerName:"",volunteerPhone:"",visitObjectName:"",visitObjectIdcard:"",visitObjectPhone:""})}},components:{ListLayout:n.a,Menu:i.a}},d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("list-layout",{attrs:{crumbData:[{title:this.$route.query.label,url:""}],columns:e.columns,tableData:e.tableData,total:e.total,pageSize:e.formData.pageSize,currentPage:e.formData.currentPage,unit:"个",header:"志愿者服务数据统计",backPath:"ServiceVolunteer ",title:"志愿者服务数据统计————志愿者服务入户探访服务花名册"},on:{getSearchValue:e.handleGetSearchValueTo}},[a("el-form",{attrs:{inline:!0,model:e.formData}},[a("el-form-item",{staticClass:"search_select",attrs:{label:"志愿者姓名"}},[a("el-input",{staticClass:"head_left",attrs:{placeholder:"请输入探访对象姓名",clearable:""},model:{value:e.formData.volunteerName,callback:function(t){e.$set(e.formData,"volunteerName","string"==typeof t?t.trim():t)},expression:"formData.volunteerName"}})],1),e._v(" "),a("el-form-item",{staticClass:"search_select",attrs:{label:"志愿者联系电话"}},[a("el-input",{staticClass:"head_left",attrs:{placeholder:"请输入联系电话",clearable:""},model:{value:e.formData.volunteerPhone,callback:function(t){e.$set(e.formData,"volunteerPhone","string"==typeof t?t.trim():t)},expression:"formData.volunteerPhone"}})],1),e._v(" "),a("el-form-item",{staticClass:"search_select",attrs:{label:"志愿者类型"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.formData.volunteerType,callback:function(t){e.$set(e.formData,"volunteerType",t)},expression:"formData.volunteerType"}},e._l(e.volunteerTypeList,function(e,t){return a("el-option",{key:t,attrs:{lable:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{staticClass:"search_select",attrs:{label:"探访对象姓名"}},[a("el-input",{staticClass:"head_left",attrs:{placeholder:"请输入探访对象姓名",clearable:""},model:{value:e.formData.visitObjectName,callback:function(t){e.$set(e.formData,"visitObjectName","string"==typeof t?t.trim():t)},expression:"formData.visitObjectName"}})],1),e._v(" "),a("el-form-item",{staticClass:"search_select",attrs:{label:"探访对象联系电话"}},[a("el-input",{staticClass:"head_left",attrs:{placeholder:"请输入联系电话",clearable:""},model:{value:e.formData.visitObjectPhone,callback:function(t){e.$set(e.formData,"visitObjectPhone","string"==typeof t?t.trim():t)},expression:"formData.visitObjectPhone"}})],1),e._v(" "),a("el-form-item",{staticClass:"search_select",attrs:{label:"探访对象身份证号"}},[a("el-input",{staticClass:"head_left",attrs:{placeholder:"请输入身份证号码",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getSearchValue.apply(null,arguments)}},model:{value:e.formData.visitObjectIdcard,callback:function(t){e.$set(e.formData,"visitObjectIdcard","string"==typeof t?t.trim():t)},expression:"formData.visitObjectIdcard"}})],1),e._v(" "),a("el-form-item",{staticClass:"search_select",attrs:{label:"探访对象类型"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.formData.visitObjectType,callback:function(t){e.$set(e.formData,"visitObjectType",t)},expression:"formData.visitObjectType"}},e._l(e.visitObjectTypeList,function(e,t){return a("el-option",{key:t,attrs:{lable:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{staticClass:"search_select",attrs:{label:"地区筛选"}},[a("el-cascader",{attrs:{placeholder:"选择地区",options:e.locationOptions,"show-all-levels":!1,"change-on-select":"",filterable:"",clearable:"",props:e.locationProps},on:{change:e.handleChangeLocation},model:{value:e.selectedLocation,callback:function(t){e.selectedLocation=t},expression:"selectedLocation"}})],1)],1),e._v(" "),a("div",{staticClass:"btns_box"},[a("div",{staticClass:"btns_right"},[a("el-button",{staticClass:"btn",on:{click:e.clearSearchValue}},[e._v("重置")]),e._v(" "),a("el-button",{staticClass:"btn",attrs:{icon:"el-icon-search",loading:e.isSearchLoading},on:{click:e.handleGetSearchValue}},[e._v("查询")])],1)]),e._v(" "),a("Menu")],1)};d._withStripped=!0;var v={render:d,staticRenderFns:[]},f=v;var p=!1;var m=a("VU/8")(h,f,!1,function(e){p||a("OkRt")},"data-v-4bd01f81",null);m.options.__file="src/views/VolunteerList/index.vue";t.default=m.exports}});