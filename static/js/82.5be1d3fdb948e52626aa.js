webpackJsonp([82],{"2o1Q":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("OvRC"),o=a.n(r),l=a("woOf"),n=a.n(l),i=a("Dd8w"),s=a.n(i),c=a("NYxO"),d=a("P9l9"),u=a("sxQs"),p={data:function(){return{ops:{vuescroll:{},scrollPanel:{scrollingX:!1},bar:{background:"#eee"}},isSearchLoading:!1,columns:[{label:"序号",prop:"index",width:"150"},{label:"姓名",prop:"name"},{label:"身份证号码",prop:"idcardNumber"},{label:"性别",prop:"sex"},{label:"年龄",prop:"age"},{label:"民族",prop:"localNation"},{label:"手机号码",prop:"oldphone"},{label:"补贴类别",prop:"serviceType"},{label:"所属养老驿站",prop:"deptName"},{label:"户籍地址",prop:"address"},{label:"采集日期",prop:"createtime"},{label:"消费订单数",prop:"payOrderNoTotal"}],tableData:[],serviceOrderItemlist:["全部","普通老年人","享受补贴老年人"],payList:["全部","微信","支付宝","现金","饭卡"],fullscreen:!0,selectedLocation:this.$route.query.code&&"string"!=typeof this.$route.query.code?this.$route.query.code.slice(1):[],locationOptions:[],orderAll:"",index:1,locationProps:{value:"code",label:"name",children:"childs"},pageSize:10,currentPage:1,total:0,formData:{DeptName:"",orderName:"",orderPhone:"",orderCard:"",streetCode:this.initCodeFromQuery(2),zoneCode:this.initCodeFromQuery(1),communityCode:this.initCodeFromQuery(3),payOrderNoTotalStart:"",payOrderNoTotalEnd:""},params:{}}},computed:s()({},Object(c.b)(["userType","code"]),{userAuthCodeParams:function(){var e={};return 2===this.userType&&(e={zoneCode:this.initCodeFromQuery(1)}),3===this.userType&&(e={streetCode:this.initCodeFromQuery(2)}),4===this.userType&&(e={communityCode:this.initCodeFromQuery(3)}),n()({},{streetCode:"",zoneCode:"",communityCode:""},e)}}),created:function(){var e=this;this.$store.dispatch("getUserAuthInfo").then(function(){e.getLocation(),e.handleGetSearchValue()}).catch(function(e){console.log("获取用户权限失败",e)})},methods:{initCodeFromQuery:function(e){return this.$route.query.code&&"string"!=typeof this.$route.query.code&&this.$route.query.code[e]||""},requestParams:function(e){var t,a=this.selectedLocation.length>0?o()(null):this.userAuthCodeParams;return t=n()({},this.formData,{page:"number"==typeof e?e:1,pageSize:this.pageSize},a),console.log(o()(null)),t},handleGetSearchValue:function(e){var t=this;this.isSearchLoading=!0;var a=this.formData,r=a.payOrderNoTotalEnd,o=a.payOrderNoTotalStart;o=o?parseInt(o):"",r=r?parseInt(r):"",o&&r&&(this.formData.flagpoint=1),d.a.getSecondPageList(this.requestParams(e)).then(function(e){t.isSearchLoading=!1;var a=e&&e.obj,r=a.records,o=a.total,l=a.size,n=a.current;t.tableData=r,t.pageSize=l,t.currentPage=n,t.total=o}).catch(function(){t.isSearchLoading=!1})},handleChangeLocation:function(e){"3"===this.userType?(this.formData.streetCode=e[0]||"",this.formData.communityCode=e[1]||""):"4"===this.userType?this.formData.communityCode=e[0]||"":(this.formData.zoneCode=e[0]||"",this.formData.streetCode=e[1]||"",this.formData.communityCode=e[2]||"")},getLocation:function(){var e=this;d.a.getLocationList().then(function(t){var a=t.data,r=e.$store.state.code[0]||"";if(a&&a.length>0){var o=a.filter(function(e){return"河西区"==e.name})[0].childs,l=r?e.getLocalListByCode(o,r):[];e.locationOptions=l.length>0?l:o}}).catch(function(){console.log("查询片区数据失败")})},getLocalListByCode:function(e,t){var a=[];return function e(r){var o=[];if(r&&(o=r.filter(function(a){return a.code==t||!!(a.childs&&a.childs.length>0)&&void e(a.childs)})).length>0)return a=o,!1}(e),a},handleServiceClass:function(){this.currentPage=1},clearSearchValue:function(){this.formData=n()({},this.formData,{DeptName:"",orderName:"",orderPhone:"",orderCard:"",zoneCode:"",streetCode:"",communityCode:"",payOrderNoTotalStart:"",payOrderNoTotalEnd:""}),this.selectedLocation=[]}},components:{ListLayout:u.a}},h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("list-layout",{attrs:{crumbData:[{title:this.$route.query.label,url:""}],columns:e.columns,tableData:e.tableData,total:e.total,pageSize:e.pageSize,currentPage:e.currentPage,code:e.$route.query.code,title:"助餐服务监管大数据统计分析————服务老人"},on:{getSearchValue:e.handleGetSearchValue}},[a("el-form",{attrs:{inline:!0,model:e.formData}},[a("el-form-item",{staticClass:"search_select",attrs:{label:"所属养老驿站"}},[a("el-input",{staticClass:"head_left",attrs:{placeholder:"请输入所属养老驿站",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleGetSearchValue.apply(null,arguments)}},model:{value:e.formData.DeptName,callback:function(t){e.$set(e.formData,"DeptName","string"==typeof t?t.trim():t)},expression:"formData.DeptName"}})],1),e._v(" "),a("el-form-item",{staticClass:"search_select",attrs:{label:"姓名"}},[a("el-input",{staticClass:"head_left",attrs:{placeholder:"请输入姓名",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleGetSearchValue.apply(null,arguments)}},model:{value:e.formData.orderName,callback:function(t){e.$set(e.formData,"orderName","string"==typeof t?t.trim():t)},expression:"formData.orderName"}})],1),e._v(" "),a("el-form-item",{staticClass:"search_select",attrs:{label:"身份证号码"}},[a("el-input",{staticClass:"head_left",attrs:{placeholder:"请输入身份证号码",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleGetSearchValue.apply(null,arguments)}},model:{value:e.formData.orderCard,callback:function(t){e.$set(e.formData,"orderCard","string"==typeof t?t.trim():t)},expression:"formData.orderCard"}})],1),e._v(" "),a("el-form-item",{staticClass:"search_select",attrs:{label:"手机号码"}},[a("el-input",{staticClass:"head_left",attrs:{placeholder:"请输入手机号码",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleGetSearchValue.apply(null,arguments)}},model:{value:e.formData.orderPhone,callback:function(t){e.$set(e.formData,"orderPhone","string"==typeof t?t.trim():t)},expression:"formData.orderPhone"}})],1),e._v(" "),a("el-form-item",{staticClass:"search_select",attrs:{label:"地区筛选"}},[a("el-cascader",{attrs:{placeholder:"选择地区",options:e.locationOptions,"show-all-levels":!1,"change-on-select":"",filterable:"",clearable:"",props:e.locationProps},on:{change:e.handleChangeLocation},model:{value:e.selectedLocation,callback:function(t){e.selectedLocation=t},expression:"selectedLocation"}})],1),e._v(" "),a("el-form-item",{staticClass:"order_Number",attrs:{label:"消费订单数"}},[a("el-input",{staticClass:"order_item",attrs:{placeholder:"起始订单数",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleGetSearchValue.apply(null,arguments)}},model:{value:e.formData.payOrderNoTotalStart,callback:function(t){e.$set(e.formData,"payOrderNoTotalStart","string"==typeof t?t.trim():t)},expression:"formData.payOrderNoTotalStart"}}),e._v(" "),a("span",[e._v("-")]),e._v(" "),a("el-input",{staticClass:"order_item",attrs:{placeholder:"截至订单数",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleGetSearchValue.apply(null,arguments)}},model:{value:e.formData.payOrderNoTotalEnd,callback:function(t){e.$set(e.formData,"payOrderNoTotalEnd","string"==typeof t?t.trim():t)},expression:"formData.payOrderNoTotalEnd"}})],1)],1),e._v(" "),a("div",{staticClass:"btns_box"},[a("div",{staticClass:"btns_right"},[a("el-button",{staticClass:"btn",on:{click:e.clearSearchValue}},[e._v("重置")]),e._v(" "),a("el-button",{staticClass:"btn",attrs:{icon:"el-icon-search",loading:e.isSearchLoading},on:{click:e.handleGetSearchValue}},[e._v("查询")])],1)])],1)};h._withStripped=!0;var m={render:h,staticRenderFns:[]},f=m;var y=!1;var C=a("VU/8")(p,f,!1,function(e){y||a("6a0m")},"data-v-106040e1",null);C.options.__file="src/views/ServiceoldMan/index.vue";t.default=C.exports},"6a0m":function(e,t,a){var r=a("AZjD");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("rjj0")("1e514087",r,!1,{})},AZjD:function(e,t,a){(e.exports=a("FZ+f")(!0)).push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"index.vue",sourceRoot:""}])}});