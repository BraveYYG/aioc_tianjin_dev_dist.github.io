webpackJsonp([53],{DiWy:function(e,t,a){var r=a("aRF6");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("rjj0")("0b7ae5e4",r,!1,{})},EM2R:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("pFYg"),o=a.n(r),s=a("woOf"),i=a.n(s),l=a("Dd8w"),n=a.n(l),c=a("NYxO"),u=a("P9l9"),h=a("sxQs"),m={name:"ServiceCarrier",data:function(){return{ops:{vuescroll:{},scrollPanel:{scrollingX:!1},bar:{background:"#eee"}},isSearchLoading:!1,columns:[{label:"序号",prop:"index",width:"150"},{label:"服务载体",prop:"merchantName"},{label:"级别",prop:"canteenlevel"},{label:"服务商",prop:"companyname"},{label:"所属街道",prop:"street"},{label:"所属社区",prop:"community"},{label:"具体位置",prop:"address"},{label:"建设规模",prop:"constructionScale"},{label:"服务人员情况",prop:"servicePeople"},{label:"服务辐射范围",prop:"serviceRadiationRange"}],serviceColums:[{label:"序号",prop:"index",width:"150"},{label:"编号",prop:"canteenNumber"},{label:"载体名称",prop:"merchantName"},{label:"载体级别",prop:"canteenlevel"},{label:"服务商",prop:"companyname"},{label:"供餐企业",prop:"enterprisename"},{label:"补贴订单",prop:"payOrdertotal"},{label:"补贴金额（元）",prop:"allowancetotal"}],companyList:[],tableData:[],serviceOrderItemlist:[{label:"全部",value:""},{label:"街级",value:"街级"},{label:"社区",value:"社区"},{label:"服务站",value:"服务站"}],fullscreen:!0,index:1,locationProps:{value:"code",label:"name",children:"childs"},pageSize:10,currentPage:1,total:0,path:"",title:"",service:this.$route.query.canteenlevel?this.$route.query.canteenlevel:"",formData:{merchantName:"",companyName:this.$route.query.companyName||"",serviceArea:"",canteenlevel:"",enterprisename:""},params:{},streetCode:"",zoneCode:"",communityCode:"",paramsCode:{}}},computed:n()({},Object(c.b)(["userType","code"]),{userAuthCodeParams:function(){var e={};return 1===this.userType&&(e={zoneCode:this.initCodeFromQuery(1),streetCode:this.initCodeFromQuery(2),communityCode:this.initCodeFromQuery(3)}),2===this.userType&&(e={zoneCode:this.initCodeFromQuery(1)}),3===this.userType&&(e={streetCode:this.initCodeFromQuery(2)}),4===this.userType&&(e={communityCode:this.initCodeFromQuery(3)}),i()({},{streetCode:"",zoneCode:"",communityCode:""},e)}}),created:function(){var e=this;switch(u.a.getmerchantServicesList().then(function(t){e.companyList=t.data.merchantMap.map(function(e){return e.MerchantName})}),this.$store.dispatch("getUserAuthInfo").then(function(){e.handleGetSearchValue()}).catch(function(t){console.log("获取用户权限失败",t),e.handleGetSearchValue()}),this.$route.query.key){case"1":this.path="FiveService",this.title="五大服务大数据统计分析";break;case"3":this.path="HomeDistribution",this.title="居家养老服务载体分布";break;case"4":this.path="ProvideSubsidy",this.title="养老补贴落实大数据统计";break;default:this.path="buffetPage",this.title="助餐服务监管大数据统计分析"}"string"==typeof this.$route.query.code?this.paramsCode={code:this.$route.query.code}:"object"===o()(this.$route.query.code)&&(this.streetCode=this.$route.query.code[2],this.zoneCode=this.$route.query.code[1],this.communityCode=this.$route.query.code[3],this.paramsCode={streetCode:this.streetCode,zoneCode:this.zoneCode,communityCode:this.communityCode})},methods:{initCodeFromQuery:function(e){return this.$route.query.code&&"string"!=typeof this.$route.query.code&&this.$route.query.code[e]||""},requestParams:function(e){var t=this.userAuthCodeParams;return this.$route.query.type?t.allowanceMoney=1:t.merchantFlag=1,i()({},this.formData,{page:"number"==typeof e?e:1,pageSize:this.pageSize,canteenlevel:this.$route.query.canteenlevel},t)},handleGetSearchValue:function(e){var t=this;this.isSearchLoading=!0,this.formData.canteenlevel=this.service||"",this.$route.query.type?u.a.getFreeOrderPage(this.requestParams(e)).then(function(e){t.isSearchLoading=!1;var a=e&&e.obj,r=a.records,o=a.total,s=a.size,i=a.current;t.tableData=r,t.pageSize=s,t.currentPage=i,t.total=o}).catch(function(){t.isSearchLoading=!1}):u.a.getServicesPageList(i()(this.requestParams(e),this.paramsCode)).then(function(e){t.isSearchLoading=!1;var a=e&&e.obj,r=a.records,o=a.total,s=a.size,i=a.current;t.tableData=r,t.pageSize=s,t.currentPage=i,t.total=o}).catch(function(){t.isSearchLoading=!1})},handleServiceClass:function(){this.currentPage=1},clearSearchValue:function(){this.formData=i()({},this.formData,{merchantName:"",companyName:"",serviceArea:"",canteenlevel:"",enterprisename:"",zoneCode:"",streetCode:"",communityCode:""}),this.searchService="",this.selectedLocation=[]}},components:{ListLayout:h.a}},p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("list-layout",{attrs:{crumbData:[{title:this.$route.query.label,url:""}],columns:e.$route.query.type?e.serviceColums:e.columns,tableData:e.tableData,total:e.total,pageSize:e.pageSize,currentPage:e.currentPage,unit:"个",header:e.$route.query.header||"居家养老服务载体分布",backPath:e.path,title:e.title+"————服务载体"+(e.$route.query.type?"补贴":"")},on:{getSearchValue:e.handleGetSearchValue}},[a("el-form",{attrs:{inline:!0,model:e.formData}},[a("el-form-item",{staticClass:"search_select",attrs:{label:"载体名称"}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择"},model:{value:e.formData.merchantName,callback:function(t){e.$set(e.formData,"merchantName","string"==typeof t?t.trim():t)},expression:"formData.merchantName"}},e._l(e.companyList,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})}),1)],1),e._v(" "),a("el-form-item",{staticClass:"search_select",attrs:{label:"级别"}},[a("el-select",{attrs:{clearable:"",multiple:"",placeholder:"请选择级别"},model:{value:e.service,callback:function(t){e.service=t},expression:"service"}},e._l(e.serviceOrderItemlist,function(t,r){return a("el-option",{key:r,attrs:{label:t.label,value:t.value},on:{change:e.handleServiceClass}})}),1)],1),e._v(" "),a("el-form-item",{staticClass:"search_select",attrs:{label:"服务商"}},[a("el-input",{staticClass:"head_left",attrs:{placeholder:"请输入服务商",clearable:""},model:{value:e.formData.companyName,callback:function(t){e.$set(e.formData,"companyName","string"==typeof t?t.trim():t)},expression:"formData.companyName"}})],1),e._v(" "),a("el-form-item",{staticClass:"search_select",attrs:{label:"供餐企业"}},[a("el-input",{staticClass:"head_left",attrs:{placeholder:"请输入供餐企业",clearable:""},model:{value:e.formData.enterprisename,callback:function(t){e.$set(e.formData,"enterprisename","string"==typeof t?t.trim():t)},expression:"formData.enterprisename"}})],1),e._v(" "),a("el-form-item",{staticClass:"search_select",attrs:{label:"服务区域"}},[a("el-input",{staticClass:"head_left",attrs:{placeholder:"请输入服务区域",clearable:""},model:{value:e.formData.serviceArea,callback:function(t){e.$set(e.formData,"serviceArea","string"==typeof t?t.trim():t)},expression:"formData.serviceArea"}})],1)],1),e._v(" "),a("div",{staticClass:"btns_box"},[a("div",{staticClass:"btns_right"},[a("el-button",{staticClass:"btn",on:{click:e.clearSearchValue}},[e._v("重置")]),e._v(" "),a("el-button",{staticClass:"btn",attrs:{icon:"el-icon-search",loading:e.isSearchLoading},on:{click:e.handleGetSearchValue}},[e._v("查询")])],1)])],1)};p._withStripped=!0;var d={render:p,staticRenderFns:[]},b=d;var f=!1;var v=a("VU/8")(m,b,!1,function(e){f||a("DiWy")},"data-v-bb35f300",null);v.options.__file="src/views/ServiceCarrier/index.vue";t.default=v.exports},aRF6:function(e,t,a){(e.exports=a("FZ+f")(!0)).push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"index.vue",sourceRoot:""}])}});