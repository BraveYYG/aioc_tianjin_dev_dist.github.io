webpackJsonp([71],{"2j06":function(e,t,a){(e.exports=a("FZ+f")(!0)).push([e.i,"\n[data-v-3ed13bfe] .el-table thead th.rightText {\n  text-align: right !important;\n  padding-right: 0 !important;\n  border-right: none;\n}\n[data-v-3ed13bfe] .el-table thead th.rightText .cell {\n  padding-right: 0 !important;\n}\n[data-v-3ed13bfe] .el-table thead th.leftText {\n  text-align: left !important;\n  padding-left: 0 !important;\n  border-left: none;\n}\n[data-v-3ed13bfe] .el-table thead th.leftText .cell {\n  padding-left: 0 !important;\n}\n.el-date-editor.el-input[data-v-3ed13bfe],\n.el-date-editor.el-input__inner[data-v-3ed13bfe] {\n  width: 1.6rem;\n  margin-right: 0.2rem;\n}\n.btns_box[data-v-3ed13bfe] {\n  height: 0.5rem;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: end;\n      -ms-flex-pack: end;\n          justify-content: flex-end;\n}\n","",{version:3,sources:["F:/web01/aioc-tianjin-dev/src/views/ServiceConditionGather/index.vue"],names:[],mappings:";AACA;EACE,6BAA6B;EAC7B,4BAA4B;EAC5B,mBAAmB;CACpB;AACD;EACE,4BAA4B;CAC7B;AACD;EACE,4BAA4B;EAC5B,2BAA2B;EAC3B,kBAAkB;CACnB;AACD;EACE,2BAA2B;CAC5B;AACD;;EAEE,cAAc;EACd,qBAAqB;CACtB;AACD;EACE,eAAe;EACf,qBAAqB;EACrB,qBAAqB;EACrB,cAAc;EACd,sBAAsB;MAClB,mBAAmB;UACf,0BAA0B;CACnC",file:"index.vue",sourcesContent:["\n[data-v-3ed13bfe] .el-table thead th.rightText {\n  text-align: right !important;\n  padding-right: 0 !important;\n  border-right: none;\n}\n[data-v-3ed13bfe] .el-table thead th.rightText .cell {\n  padding-right: 0 !important;\n}\n[data-v-3ed13bfe] .el-table thead th.leftText {\n  text-align: left !important;\n  padding-left: 0 !important;\n  border-left: none;\n}\n[data-v-3ed13bfe] .el-table thead th.leftText .cell {\n  padding-left: 0 !important;\n}\n.el-date-editor.el-input[data-v-3ed13bfe],\n.el-date-editor.el-input__inner[data-v-3ed13bfe] {\n  width: 1.6rem;\n  margin-right: 0.2rem;\n}\n.btns_box[data-v-3ed13bfe] {\n  height: 0.5rem;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: end;\n      -ms-flex-pack: end;\n          justify-content: flex-end;\n}\n"],sourceRoot:""}])},DAOA:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("fZjL"),r=a.n(n),i=a("woOf"),o=a.n(i),l=a("hmat"),c=a("sxQs"),s=a("oAV5"),d=a("P9l9"),h={name:"ServiceConditionGather",data:function(){return{gatherForm:{beginDay:Object(s.b)(new Date("2021,01,01")),endDay:Object(s.b)(new Date),canteenlevel:"",servicePoint:"",merchantName:""},servicePointList:[],merchantList:[],merchantListload:[],table:[{A:"助餐服务类",B:"早餐",code:"breakfast"},{A:"助餐服务类",B:"午餐",code:"lunch"},{A:"助餐服务类",B:"晚餐",code:"dinner"},{A:"助餐服务类",B:"小计",code:"accommodation"},{A:"生活照料类",code:"lifecare"},{A:"助医服务类",code:"medical"},{A:"托养床位类",code:"feeding"},{A:"其它服务类",code:"other"},{A:"合计",code:"total"}],tableData:[],columns:[{label:"服务",prop:"A",className:"rightText"},{label:"类型",prop:"B",className:"leftText"},{label:"服务量（客次）",prop:"serviceNum"},{label:"消费金额（元）",prop:"totalAmount"},{label:"服务人口数（人）",prop:"peopleNum"},{label:"其中：白卡服务量（客次）",prop:"cardServiceNum"},{label:"其中：白卡消费金额（元）",prop:"cardTotalAmount"},{label:"其中：老年人服务量（客次）",prop:"oldServiceNum"},{label:"其中：老年人消费金额（元）",prop:"oldTotalAmount"},{label:"服务方式",prop:"fieldNum/visitingNum",children:[{label:"现场服务（客次）",prop:"fieldNum"},{label:"入户服务（客次）",prop:"visitingNum"}]}],isSearchLoading:!1}},components:{ListLayout:c.a,Menu:l.a},mounted:function(){this.tableData=this.table,this.getServicePointListData(),this.getMerchantNameListData(),this.getServiceSummarizingMapData()},methods:{objectSpanMethod:function(e){e.row,e.column;var t=e.rowIndex,a=e.columnIndex;return 0===a&&0===t?{rowspan:4,colspan:1}:0===a&&t<4&&t>0?{rowspan:0,colspan:0}:t>=4&&0===a?{rowspan:1,colspan:2}:t>=4&&a>0&&a<2?{rowspan:0,colspan:0}:void 0},getServicePointListData:function(){var e=this;d.a.getServicePointList({}).then(function(t){200==t.code&&(e.servicePointList=t.data)})},handleChangeServicePoint:function(e){this.gatherForm.servicePoint=e,this.getMerchantNameListData(this.gatherForm.servicePoint)},getMerchantNameListData:function(e){var t=this,a={servicePoint:e};d.a.getMerchantNameList(a).then(function(e){t.merchantList=[],e.data.forEach(function(e){t.merchantList.push({value:e})})})},handleResetGatherForm:function(){this.gatherForm={beginDay:"",endDay:"",canteenlevel:"",servicePoint:"",merchantName:""}},handleGetSearchValue:function(){this.getServiceSummarizingMapData()},getServiceSummarizingMapData:function(){var e=this;this.isSearchLoading=!0;var t={beginDay:this.gatherForm.beginDay,endDay:this.gatherForm.endDay,canteenlevel:this.gatherForm.canteenlevel.join(","),servicePoint:this.gatherForm.servicePoint,merchantName:this.gatherForm.merchantName};d.a.getServiceSummarizingMap(t).then(function(t){if(console.log(t),t.code&&200==t.code&&t.data){e.isSearchLoading=!1;var a=[];e.table.map(function(e){a.push(o()({},e,t.data[e.code]))}),e.tableData=a}})},handleSelect:function(e){console.log(e)},querySearch:function(e,t){var a=this.merchantList;t(e?a.filter(this.createFilter(e)):a)},createFilter:function(e){return function(t){return 0===t.value.toLowerCase().indexOf(e.toLowerCase())}}},computed:{downloadExcel:function(){var e=this,t="/yanglao-api/serviceSummarizing/summarizingExport?";return r()(this.gatherForm).forEach(function(a,n){t+=e.gatherForm[a]?a+"="+e.gatherForm[a]+"&":""}),t}}},m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("list-layout",{attrs:{header:"居家养老服务情况汇总统计表",title:"五大服务类别数据综合分析——居家养老服务情况汇总统计表",backPath:"FiveService",tableData:e.tableData,columns:e.columns,objectSpanMethod:e.objectSpanMethod}},[a("el-form",{ref:"gatherForm",attrs:{inline:!0},model:{value:e.gatherForm,callback:function(t){e.gatherForm=t},expression:"gatherForm"}},[a("el-form-item",{staticClass:"search_select search_time",attrs:{label:"起止时间"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"开始日期","value-format":"yyyy-MM-dd"},model:{value:e.gatherForm.beginDay,callback:function(t){e.$set(e.gatherForm,"beginDay",t)},expression:"gatherForm.beginDay"}}),e._v(" "),a("el-date-picker",{attrs:{type:"date",placeholder:"截止日期","value-format":"yyyy-MM-dd"},model:{value:e.gatherForm.endDay,callback:function(t){e.$set(e.gatherForm,"endDay",t)},expression:"gatherForm.endDay"}})],1),e._v(" "),a("el-form-item",{staticClass:"search_select",attrs:{label:"载体级别"}},[a("el-select",{attrs:{placeholder:"请选择",clearable:"",multiple:""},model:{value:e.gatherForm.canteenlevel,callback:function(t){e.$set(e.gatherForm,"canteenlevel",t)},expression:"gatherForm.canteenlevel"}},[a("el-option",{attrs:{label:"服务站",value:"服务站"}}),e._v(" "),a("el-option",{attrs:{label:"社区级",value:"社区级"}}),e._v(" "),a("el-option",{attrs:{label:"街级",value:"街级"}})],1)],1),e._v(" "),a("el-form-item",{staticClass:"search_select",attrs:{label:"养老服务商"}},[a("el-select",{attrs:{placeholder:"请选择",clearable:""},on:{change:e.handleChangeServicePoint},model:{value:e.gatherForm.servicePoint,callback:function(t){e.$set(e.gatherForm,"servicePoint",t)},expression:"gatherForm.servicePoint"}},e._l(e.servicePointList,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})}),1)],1),e._v(" "),a("el-form-item",{staticClass:"search_select",attrs:{label:"载体名称"}},[a("el-autocomplete",{staticClass:"serviceConditionGather_autocomplete",attrs:{"fetch-suggestions":e.querySearch,placeholder:"请输入内容",clearable:""},on:{select:e.handleSelect},model:{value:e.gatherForm.merchantName,callback:function(t){e.$set(e.gatherForm,"merchantName",t)},expression:"gatherForm.merchantName"}})],1)],1),e._v(" "),a("div",{staticClass:"btns_box"},[a("el-button",{staticClass:"btn",on:{click:e.handleResetGatherForm}},[e._v("重置")]),e._v(" "),a("el-button",{staticClass:"btn",attrs:{icon:"el-icon-search",loading:e.isSearchLoading},on:{click:e.handleGetSearchValue}},[e._v("查询")]),e._v(" "),a("a",{attrs:{href:e.downloadExcel,target:"_blank"}},[a("el-button",{staticClass:"btn"},[e._v("导出")])],1)],1),e._v(" "),a("Menu")],1)};m._withStripped=!0;var p={render:m,staticRenderFns:[]},u=p;var b=!1;var v=a("VU/8")(h,u,!1,function(e){b||a("dNSL")},"data-v-3ed13bfe",null);v.options.__file="src/views/ServiceConditionGather/index.vue";t.default=v.exports},dNSL:function(e,t,a){var n=a("2j06");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a("rjj0")("50adbcec",n,!1,{})}});