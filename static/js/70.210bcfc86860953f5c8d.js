webpackJsonp([70],{"91Ot":function(e,t,a){(e.exports=a("FZ+f")(!0)).push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"index.vue",sourceRoot:""}])},v4y9:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("pFYg"),o=a.n(r),s=a("woOf"),l=a.n(s),i=a("Dd8w"),n=a.n(i),c=a("NYxO"),u=a("P9l9"),d=a("sxQs"),h={data:function(){return{ops:{vuescroll:{},scrollPanel:{scrollingX:!1},bar:{background:"#eee"}},isSearchLoading:!1,columns:[{label:"序号",prop:"index",width:"150"},{label:"设备ID",prop:"markid"},{label:"设备类型",prop:"type"},{label:"设备属性",prop:"simnum"},{label:"SIM卡号",prop:"simnum"},{label:"用户姓名",prop:"oldname"},{label:"身份证号",prop:"oldcard"},{label:"联系方式",prop:"phone"},{label:"发放方式",prop:"releaseway"},{label:"开通时间",prop:"opentime"}],tableData:[],serviceOrderItemlist:["普通老年人","享受补贴老人"],payList:["全部","购买","租用","免费"],fullscreen:!0,index:1,locationProps:{value:"code",label:"name",children:"childs"},pageSize:10,currentPage:1,total:0,formData:{oldname:"",phone:"",oldcard:"",markid:"",releaseway:""},params:{},streetCode:"",zoneCode:"",communityCode:"",paramsCode:{}}},computed:n()({},Object(c.b)(["userType","code"]),{userAuthCodeParams:function(){var e={};return 2===this.userType&&(e={zoneCode:this.initCodeFromQuery(1)}),3===this.userType&&(e={streetCode:this.initCodeFromQuery(2)}),4===this.userType&&(e={communityCode:this.initCodeFromQuery(3)}),l()({},{streetCode:"",zoneCode:"",communityCode:""},e)}}),created:function(){var e=this;this.$store.dispatch("getUserAuthInfo").then(function(){e.handleGetSearchValue()}).catch(function(e){console.log("获取用户权限失败",e)}),console.log(this.$route.query),"string"==typeof this.$route.query.code?this.paramsCode={}:"object"===o()(this.$route.query.code)&&(this.streetCode=this.$route.query.code[2],this.zoneCode=this.$route.query.code[1],this.communityCode=this.$route.query.code[3],this.paramsCode={streetCode:this.streetCode,zoneCode:this.zoneCode,communityCode:this.communityCode}),this.handleGetSearchValue()},methods:{initCodeFromQuery:function(e){return this.$route.query.code&&"string"!=typeof this.$route.query.code&&this.$route.query.code[e]||""},requestParams:function(e){var t=this.userAuthCodeParams;return l()({},this.formData,{page:"number"==typeof e?e:1,pageSize:this.pageSize},t)},handleGetSearchValue:function(e){var t=this;this.isSearchLoading=!0,u.a.getDeviceopenPage(l()(this.requestParams(e),this.paramsCode)).then(function(e){t.isSearchLoading=!1;var a=e&&e.obj,r=a.records,o=a.total,s=a.size,l=a.current;t.tableData=r,t.pageSize=s,t.currentPage=l,t.total=o}).catch(function(){t.isSearchLoading=!1})},handleServiceClass:function(){this.currentPage=1},clearSearchValue:function(){this.formData=l()({},this.formData,{oldname:"",phone:"",oldcard:"",markid:"",releaseway:""}),this.searchService=""}},components:{ListLayout:d.a}},m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("list-layout",{attrs:{crumbData:[{title:this.$route.query.label,url:""}],columns:e.columns,tableData:e.tableData,total:e.total,pageSize:e.pageSize,currentPage:e.currentPage,backPath:"SmartdeviceStatistics",title:"智能设备监测大数据统计分析————一键通设备安装老人"},on:{getSearchValue:e.handleGetSearchValue}},[a("el-form",{attrs:{inline:!0,model:e.formData}},[a("el-form-item",{staticClass:"search_select",attrs:{label:"设备类型ID"}},[a("el-input",{staticClass:"head_left",attrs:{placeholder:"请输入设备类型ID",clearable:""},model:{value:e.formData.markid,callback:function(t){e.$set(e.formData,"markid","string"==typeof t?t.trim():t)},expression:"formData.markid"}})],1),e._v(" "),a("el-form-item",{staticClass:"search_select",attrs:{label:"用户姓名"}},[a("el-input",{staticClass:"head_left",attrs:{placeholder:"请输入用户姓名",clearable:""},model:{value:e.formData.oldname,callback:function(t){e.$set(e.formData,"oldname","string"==typeof t?t.trim():t)},expression:"formData.oldname"}})],1),e._v(" "),a("el-form-item",{staticClass:"search_select",attrs:{label:"身份证号码"}},[a("el-input",{staticClass:"head_left",attrs:{placeholder:"请输入身份证号码",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getSearchValue.apply(null,arguments)}},model:{value:e.formData.oldcard,callback:function(t){e.$set(e.formData,"oldcard","string"==typeof t?t.trim():t)},expression:"formData.oldcard"}})],1),e._v(" "),a("el-form-item",{staticClass:"search_select",attrs:{label:"联系方式"}},[a("el-input",{staticClass:"head_left",attrs:{placeholder:"请输入联系方式",clearable:""},model:{value:e.formData.phone,callback:function(t){e.$set(e.formData,"phone","string"==typeof t?t.trim():t)},expression:"formData.phone"}})],1),e._v(" "),a("el-form-item",{staticClass:"search_select",attrs:{label:"发放方式"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择发放方式"},model:{value:e.formData.releaseway,callback:function(t){e.$set(e.formData,"releaseway",t)},expression:"formData.releaseway"}},e._l(e.payList,function(t,r){return a("el-option",{key:r,attrs:{label:t,value:t},on:{change:e.handleServiceClass}})}),1)],1)],1),e._v(" "),a("div",{staticClass:"btns_box"},[a("div",{staticClass:"btns_right"},[a("el-button",{staticClass:"btn",on:{click:e.clearSearchValue}},[e._v("重置")]),e._v(" "),a("el-button",{staticClass:"btn",attrs:{icon:"el-icon-search",loading:e.isSearchLoading},on:{click:e.handleGetSearchValue}},[e._v("查询")])],1)])],1)};m._withStripped=!0;var p={render:m,staticRenderFns:[]},f=p;var b=!1;var y=a("VU/8")(h,f,!1,function(e){b||a("x+Pa")},"data-v-42eb9af6",null);y.options.__file="src/views/EquipmentList/index.vue";t.default=y.exports},"x+Pa":function(e,t,a){var r=a("91Ot");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("rjj0")("164b12f9",r,!1,{})}});