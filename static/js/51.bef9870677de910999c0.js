webpackJsonp([51],{UL3Q:function(e,t,a){(e.exports=a("FZ+f")(!0)).push([e.i,"\n.total_num[data-v-1577b8dc] {\n  font-size: 0.18rem;\n  color: #05e6ff;\n  height: 0.5rem;\n  line-height: 0.5rem;\n}\n.total_num p[data-v-1577b8dc] {\n  display: inline-block;\n  margin-left: 0.6rem;\n}\n","",{version:3,sources:["F:/web01/aioc-tianjin-dev/src/views/ServiceOlder/index.vue"],names:[],mappings:";AACA;EACE,mBAAmB;EACnB,eAAe;EACf,eAAe;EACf,oBAAoB;CACrB;AACD;EACE,sBAAsB;EACtB,oBAAoB;CACrB",file:"index.vue",sourcesContent:["\n.total_num[data-v-1577b8dc] {\n  font-size: 0.18rem;\n  color: #05e6ff;\n  height: 0.5rem;\n  line-height: 0.5rem;\n}\n.total_num p[data-v-1577b8dc] {\n  display: inline-block;\n  margin-left: 0.6rem;\n}\n"],sourceRoot:""}])},qVdP:function(e,t,a){e.exports=a.p+"static/img/flow.9a1c65e.png"},"s+HI":function(e,t,a){var s=a("UL3Q");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a("rjj0")("f824ff58",s,!1,{})},vWpn:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("woOf"),l=a.n(s),i=a("Dd8w"),r=a.n(i),o=a("NYxO"),n=a("P9l9"),c=a("sxQs"),m=function(e){var t="";if(e){var a=e.getMonth()+1>9?e.getMonth()+1:"0"+(e.getMonth()+1),s=e.getDate()>9?e.getDate():"0"+e.getDate();t=e.getFullYear()+"-"+a+"-"+s}return t},u={data:function(){return{ops:{vuescroll:{},scrollPanel:{scrollingX:!1},bar:{background:"#eee"}},dialogVisible:!1,isSearchLoading:!1,companyList:[],companyLists:[],columns:[{label:"序号",prop:"index",width:"60"},{label:"载体名称",prop:"merchantName",width:"220"},{label:"支付订单号",prop:"payOrderNo",detial:!0},{label:"订单人姓名",prop:"orderName"},{label:"订单人身份证号",prop:"orderCard",width:"150"},{label:"养老卡号",prop:"pensioncardNumber",width:"150"},{label:"订单人手机号",prop:"orderPhone"},{label:"服务时间",prop:"mealTime"},{label:"消费金额(元)",prop:"consumerMoney"},{label:"补贴金额(元)",prop:"allowanceMoney"},{label:"实收金额(元)",prop:"amountCollected"},{label:"服务类别",prop:"requirementBig"},{label:"支付时间",prop:"payTime"},{label:"下单方式",prop:"orderFrom"},{label:"服务方式",prop:"mealStyle"}],tableData:[],serviceOrderItemlist:["普通老年人","享受补贴老人"],ClasstypeData:["膳食供应","医疗康复","生活照料","日间托养","其它服务"],serviceOrderStatus:[{label:"未领",value:"未领"},{label:"已领",value:"已领"},{label:"退单",value:"退单"},{label:"逾期",value:"逾期"}],payList:[{label:"全部",value:""},{label:"微信",value:"微信"},{label:"支付宝",value:"支付宝"},{label:"现金",value:"现金"},{label:"饭卡",value:"饭卡"}],fullscreen:!0,ServiceData:[{label:"现场服务",value:"现场服务"},{label:"入户服务",value:"入户服务"}],orderList:["居家养老服务卡","商家APP","电话下单"],index:1,copies:0,locationProps:{value:"code",label:"name",children:"childs"},pageSize:10,currentPage:1,total:0,path:"",title:"",mealTime:[this.$route.query.startTime?new Date(JSON.parse(this.$route.query.startTime)):"",this.$route.query.endTime?new Date(JSON.parse(this.$route.query.endTime)):""],payTime:[this.$route.query.startPayTime?new Date(JSON.parse(this.$route.query.startPayTime)):"",this.$route.query.endPayTime?new Date(JSON.parse(this.$route.query.endPayTime)):""],allStatus:this.$route.query.allStatus||[],orderFroms:this.$route.query.orderFrom||[],serviceLevel:[],roleid:"",formData:{merchantName:this.$route.query.merchantName||"",orderName:"",orderPhone:"",orderCard:this.$route.query.idCard||"",payOrderNo:"",orderPersonType:"",merchantFlag:"1",payStyle:"",payTimeStart:"",payTimeEnd:"",mealTimeStart:"",mealTimeEnd:"",orderStatus:"",orderFrom:[],companyName:"",canteenlevel:"",mealType:this.$route.query.mealType||"",requirementBig:this.$route.query.key?"":"膳食供应"},params:{}}},computed:r()({},Object(o.b)(["userType","code","useName"]),{userAuthCodeParams:function(){var e={};return 1===this.userType&&(e={zoneCode:this.initCodeFromQuery(1),streetCode:this.initCodeFromQuery(2),communityCode:this.initCodeFromQuery(3)}),2===this.userType&&(e={zoneCode:this.initCodeFromQuery(1)}),3===this.userType&&(e={streetCode:this.initCodeFromQuery(2)}),4===this.userType&&(e={communityCode:this.initCodeFromQuery(3)}),l()({},{streetCode:"",zoneCode:"",communityCode:""},e)}}),watch:{useName:function(e){this.getOtherPageList(this.useName,this.roleid)}},created:function(){var e=this;switch(this.roleid=window.localStorage.getItem("roleid"),n.a.getmerchantServicesList().then(function(t){e.companyList=t.data.merchantMap.map(function(e){return e.MerchantName})}),this.$store.dispatch("getUserAuthInfo").then(function(){}).catch(function(e){console.log("获取用户权限失败",e)}),this.getOtherPageList(this.useName,this.roleid),this.$route.query.key){case"1":this.path="FiveService",this.title="五大服务大数据统计分析————服务记录";break;case"3":this.path="HomeDistribution";break;case"4":this.path="olderDistribution",this.title="河西区居家养老服务管理平台————服务记录";break;case"5":this.path="olderDistribution",this.title="服务载体运营情况统计分析————服务记录";break;default:this.path="buffetPage",this.title="助餐服务监管大数据统计分析————助餐记录"}},methods:{getOtherPageList:function(e,t){var a=this;this.companyLists=[],n.a.getOtherPageList({page:1,pageSize:12,companyName:e,roleId:t}).then(function(e){e.obj&&(e.obj.records.map(function(e){return a.companyLists.push(e.companyName)}),a.formData.companyName=a.companyLists.length>1?"":a.companyLists[0],a.handleGetSearchValue())})},initCodeFromQuery:function(e){return this.$route.query.code&&"string"!=typeof this.$route.query.code&&this.$route.query.code[e]||""},requestParams:function(e){var t=this.userAuthCodeParams;return l()({},this.formData,{page:"number"==typeof e?e:1,pageSize:this.pageSize},t)},handleGetSearchValue:function(e){var t=this;this.formData.payTimeStart=this.payTime?m(this.payTime[0]):"",this.formData.payTimeEnd=this.payTime?m(this.payTime[1]):"",this.formData.mealTimeStart=this.mealTime?m(this.mealTime[0]):"",this.formData.mealTimeEnd=this.mealTime?m(this.mealTime[1]):"",this.formData.orderFrom=this.orderFroms.length>0?this.orderFroms.join(","):"",this.formData.orderStatus=this.allStatus.length>0?this.allStatus.join(","):"",this.formData.canteenlevel=this.serviceLevel.length>0?this.serviceLevel.join(","):"",this.$route.query.allowanceMoneyZero?this.formData.allowanceMoneyZero="1":this.formData.allowanceMoneyZero="",this.isSearchLoading=!0,n.a.getFreeOrderPage(this.requestParams(e)).then(function(e){t.isSearchLoading=!1;var a=e&&e.obj,s=a.records,l=a.total,i=a.size,r=a.current;t.tableData=s,t.pageSize=i,t.currentPage=r,t.total=l}).catch(function(){t.isSearchLoading=!1});var a=this.requestParams(e);delete a.page,delete a.pageSize,n.a.getFoodeOrderPage(a).then(function(e){t.copies=parseInt(e.data.foodNumTotal)})},handleServiceClass:function(){this.currentPage=1},clearSearchValue:function(){this.formData=l()({},this.formData,{merchantName:"",orderName:"",orderPhone:"",orderCard:"",payOrderNo:"",orderPersonType:"",payStyle:"",zoneCode:"",streetCode:"",communityCode:"",payTimeStart:"",payTimeEnd:"",mealTimeStart:"",mealTimeEnd:"",orderFrom:"",mealType:"",requirementBig:"",canteenlevel:"",companyName:""}),this.searchService="",this.selectedLocation=[],this.mealTime="",this.payTime="",this.allStatus=[],this.serviceLevel=[],this.orderFroms=[]}},components:{ListLayout:c.a}},d=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("list-layout",{attrs:{crumbData:[{title:this.$route.query.label,url:""}],columns:e.columns,tableData:e.tableData,total:e.total,pageSize:e.pageSize,currentPage:e.currentPage,copies:e.$route.query.key?0:e.copies,unit:"单",dialogVisible:e.dialogVisible,backPath:e.path,title:e.title,header:e.$route.query.header},on:{getSearchValue:e.handleGetSearchValue,"update:dialogVisible":function(t){e.dialogVisible=t},"update:dialog-visible":function(t){e.dialogVisible=t}}},[s("el-form",{attrs:{inline:!0,model:e.formData}},[s("el-form-item",{staticClass:"search_select",attrs:{label:"服务商"}},[s("el-select",{attrs:{clearable:"",disabled:1===e.companyLists.length,placeholder:"请选择服务商"},model:{value:e.formData.companyName,callback:function(t){e.$set(e.formData,"companyName",t)},expression:"formData.companyName"}},e._l(e.companyLists,function(e,t){return s("el-option",{key:t,attrs:{label:e,value:e}})}),1)],1),e._v(" "),s("el-form-item",{staticClass:"search_select",attrs:{label:"载体名称"}},[s("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择"},model:{value:e.formData.merchantName,callback:function(t){e.$set(e.formData,"merchantName","string"==typeof t?t.trim():t)},expression:"formData.merchantName"}},e._l(e.companyList,function(e,t){return s("el-option",{key:t,attrs:{label:e,value:e}})}),1)],1),e._v(" "),s("el-form-item",{staticClass:"search_select",attrs:{label:"服务载体级别"}},[s("el-select",{attrs:{clearable:"",multiple:"",placeholder:"请选择载体级别"},model:{value:e.serviceLevel,callback:function(t){e.serviceLevel=t},expression:"serviceLevel"}},[s("el-option",{attrs:{label:"街级",value:"街级"}}),e._v(" "),s("el-option",{attrs:{label:"社区级",value:"社区级"}}),e._v(" "),s("el-option",{attrs:{label:"服务站",value:"服务站"}})],1)],1),e._v(" "),s("el-form-item",{staticClass:"search_select",attrs:{label:"支付单号"}},[s("el-input",{staticClass:"head_left",attrs:{placeholder:"请输入支付单号",clearable:""},model:{value:e.formData.payOrderNo,callback:function(t){e.$set(e.formData,"payOrderNo","string"==typeof t?t.trim():t)},expression:"formData.payOrderNo"}})],1),e._v(" "),s("el-form-item",{staticClass:"search_select",attrs:{label:"订单人姓名"}},[s("el-input",{staticClass:"head_left",attrs:{placeholder:"请输入订单人姓名",clearable:""},model:{value:e.formData.orderName,callback:function(t){e.$set(e.formData,"orderName","string"==typeof t?t.trim():t)},expression:"formData.orderName"}})],1),e._v(" "),s("el-form-item",{staticClass:"search_select",attrs:{label:"订单人身份证号码"}},[s("el-input",{staticClass:"head_left",attrs:{placeholder:"请输入身份证号码",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getSearchValue.apply(null,arguments)}},model:{value:e.formData.orderCard,callback:function(t){e.$set(e.formData,"orderCard","string"==typeof t?t.trim():t)},expression:"formData.orderCard"}})],1),e._v(" "),s("el-form-item",{staticClass:"search_select",attrs:{label:"订单人手机号"}},[s("el-input",{staticClass:"head_left",attrs:{placeholder:"请输入订单人手机号",clearable:""},model:{value:e.formData.orderPhone,callback:function(t){e.$set(e.formData,"orderPhone","string"==typeof t?t.trim():t)},expression:"formData.orderPhone"}})],1),e._v(" "),s("el-form-item",{staticClass:"search_select",attrs:{label:"服务时间"}},[s("el-date-picker",{attrs:{type:"daterange","range-separator":"-",clearable:"","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.mealTime,callback:function(t){e.mealTime=t},expression:"mealTime"}})],1),e._v(" "),s("el-form-item",{staticClass:"search_select",attrs:{label:"支付时间"}},[s("el-date-picker",{attrs:{type:"daterange","range-separator":"-",clearable:"","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.payTime,callback:function(t){e.payTime=t},expression:"payTime"}})],1),e._v(" "),s("el-form-item",{staticClass:"search_select",attrs:{label:"订单状态"}},[s("el-select",{attrs:{multiple:"",clearable:"",placeholder:"请选择订单状态"},model:{value:e.allStatus,callback:function(t){e.allStatus=t},expression:"allStatus"}},e._l(e.serviceOrderStatus,function(t,a){return s("el-option",{key:a,attrs:{label:t.label,value:t.value},on:{change:e.handleServiceClass}})}),1)],1),e._v(" "),s("el-form-item",{staticClass:"search_select",attrs:{label:"下单方式"}},[s("el-select",{attrs:{clearable:"",multiple:"",placeholder:"请选择下单方式"},model:{value:e.orderFroms,callback:function(t){e.orderFroms=t},expression:"orderFroms"}},e._l(e.orderList,function(t,a){return s("el-option",{key:a,attrs:{label:t,value:t},on:{change:e.handleServiceClass}})}),1)],1),e._v(" "),s("el-form-item",{staticClass:"search_select",attrs:{label:"服务方式"}},[s("el-select",{attrs:{clearable:"",placeholder:"请选择服务方式"},model:{value:e.formData.mealType,callback:function(t){e.$set(e.formData,"mealType",t)},expression:"formData.mealType"}},e._l(e.ServiceData,function(t,a){return s("el-option",{key:a,attrs:{label:t.label,value:t.value},on:{change:e.handleServiceClass}})}),1)],1),e._v(" "),s("el-form-item",{staticClass:"search_select",attrs:{label:"服务类别"}},[s("el-select",{attrs:{clearable:"",placeholder:"请选择服务类别",disabled:!e.$route.query.key},model:{value:e.formData.requirementBig,callback:function(t){e.$set(e.formData,"requirementBig",t)},expression:"formData.requirementBig"}},e._l(e.ClasstypeData,function(t,a){return s("el-option",{key:a,attrs:{label:t,value:t},on:{change:e.handleServiceClass}})}),1)],1)],1),e._v(" "),s("div",{staticClass:"btns_box"},[s("div",{staticClass:"total_num"},[s("p",[e._v("\n        服务人次：\n        "),s("span",[e._v(e._s(e.total))]),e._v("次\n      ")]),e._v(" "),e.$route.query.key?e._e():s("p",[e._v("\n        就餐份数：\n        "),s("span",[e._v(e._s(e.copies))]),e._v("份\n      ")])]),e._v(" "),s("div",{staticClass:"btns_right"},[s("el-button",{staticClass:"btn",on:{click:e.clearSearchValue}},[e._v("重置")]),e._v(" "),s("el-button",{staticClass:"btn",attrs:{icon:"el-icon-search",loading:e.isSearchLoading},on:{click:e.handleGetSearchValue}},[e._v("查询")])],1)]),e._v(" "),s("el-dialog",{attrs:{title:"服务记录详情",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[s("ol",{staticClass:"detial_content"},[s("li",{staticClass:"detial_item"},[s("div",{staticClass:"item_contnet"},[s("span",{staticClass:"item_label"},[e._v("订单号：")]),e._v(" "),s("span",{staticClass:"item_value"},[e._v(e._s(213))])]),e._v(" "),s("div",{staticClass:"item_contnet"},[s("span",{staticClass:"item_label"},[e._v("老人姓名：")]),e._v(" "),s("span",{staticClass:"item_value"},[e._v(e._s(213))])]),e._v(" "),s("div",{staticClass:"item_contnet"},[s("span",{staticClass:"item_label"},[e._v("联系电话：")]),e._v(" "),s("span",{staticClass:"item_value"},[e._v(e._s(123))])])]),e._v(" "),s("li",{staticClass:"detial_item"},[s("div",{staticClass:"item_contnet"},[s("span",{staticClass:"item_label"},[e._v("服务地址：")]),e._v(" "),s("span",{staticClass:"item_value"},[e._v(e._s(3123))])]),e._v(" "),s("div",{staticClass:"item_contnet"},[s("span",{staticClass:"item_label"},[e._v("服务项目：")]),e._v(" "),s("span",{staticClass:"item_value"},[e._v(e._s(3213))])]),e._v(" "),s("div",{staticClass:"item_contnet"},[s("span",{staticClass:"item_label"},[e._v("消费金额：")]),e._v(" "),s("span",{staticClass:"item_value"},[e._v(e._s(321321))])])]),e._v(" "),s("li",{staticClass:"detial_item"},[s("div",{staticClass:"item_contnet"},[s("span",{staticClass:"item_label"},[e._v("支付方式：")]),e._v(" "),s("span",{staticClass:"item_value"},[e._v(e._s(3213213))])]),e._v(" "),s("div",{staticClass:"item_contnet"},[s("span",{staticClass:"item_label"},[e._v("下单时间：")]),e._v(" "),s("span",{staticClass:"item_value"},[e._v(e._s(4324324))])]),e._v(" "),s("div",{staticClass:"item_contnet"},[s("span",{staticClass:"item_label"},[e._v("预约时间：")]),e._v(" "),s("span",{staticClass:"item_value"},[e._v(e._s(432432))])])]),e._v(" "),s("li",{staticClass:"detial_item"},[s("div",{staticClass:"item_contnet"},[s("span",{staticClass:"item_label"},[e._v("服务状态：")]),e._v(" "),s("span",{staticClass:"item_value"},[e._v(e._s(4324324))])]),e._v(" "),s("div",{staticClass:"item_contnet"},[s("span",{staticClass:"item_label"},[e._v("完成时间：")]),e._v(" "),s("span",{staticClass:"item_value"},[e._v(e._s(4324324))])]),e._v(" "),s("div",{staticClass:"item_contnet"},[s("span",{staticClass:"item_label"},[e._v("服务商家：")]),e._v(" "),s("span",{staticClass:"item_value"},[e._v(e._s(4324324))])])]),e._v(" "),s("li",{staticClass:"detial_item"},[s("div",{staticClass:"item_contnet"},[s("span",{staticClass:"flow_tit"},[e._v("服务记录服务流程：")])])]),e._v(" "),s("li",{staticClass:"detial_item"},[s("div",{staticClass:"item_contnet"},[s("img",{staticClass:"flow_icon",attrs:{src:a("qVdP"),alt:"",srcset:""}}),e._v(" "),s("span",{staticClass:"item_flow"},[e._v("人工接单")]),e._v(" "),s("span",{staticClass:"item_flow"},[e._v("2021-04-05")]),e._v(" "),s("span",{staticClass:"item_flow"},[e._v("下单人：王奶奶")])])]),e._v(" "),s("li",{staticClass:"detial_item"},[s("div",{staticClass:"item_contnet"},[s("img",{staticClass:"flow_icon",attrs:{src:a("qVdP"),alt:"",srcset:""}}),e._v(" "),s("span",{staticClass:"item_flow"},[e._v("人工接单")]),e._v(" "),s("span",{staticClass:"item_flow"},[e._v("2021-04-05")]),e._v(" "),s("span",{staticClass:"item_flow"},[e._v("下单人：王奶奶")])])]),e._v(" "),s("li",{staticClass:"detial_item"},[s("div",{staticClass:"item_contnet"},[s("img",{staticClass:"flow_icon",attrs:{src:a("qVdP"),alt:"",srcset:""}}),e._v(" "),s("span",{staticClass:"item_flow"},[e._v("人工接单")]),e._v(" "),s("span",{staticClass:"item_flow"},[e._v("2021-04-05")]),e._v(" "),s("span",{staticClass:"item_flow"},[e._v("下单人：王奶奶")])])])])])],1)};d._withStripped=!0;var p={render:d,staticRenderFns:[]},v=p;var h=!1;var _=a("VU/8")(u,v,!1,function(e){h||a("s+HI")},"data-v-1577b8dc",null);_.options.__file="src/views/ServiceOlder/index.vue";t.default=_.exports}});