webpackJsonp([55],{FCGi:function(e,t,a){(e.exports=a("FZ+f")(!0)).push([e.i,"\n.el-date-editor.el-input[data-v-9d2ec568],\r\n.el-date-editor.el-input__inner[data-v-9d2ec568] {\r\n  width: 1.6rem;\r\n  margin-right: 0.2rem;\n}\r\n","",{version:3,sources:["F:/web01/aioc-tianjin-dev/src/views/ServiceCarrierRank/index.vue"],names:[],mappings:";AACA;;EAEE,cAAc;EACd,qBAAqB;CACtB",file:"index.vue",sourcesContent:["\n.el-date-editor.el-input[data-v-9d2ec568],\r\n.el-date-editor.el-input__inner[data-v-9d2ec568] {\r\n  width: 1.6rem;\r\n  margin-right: 0.2rem;\n}\r\n"],sourceRoot:""}])},LHQB:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("fZjL"),l=a.n(o),n=a("Dd8w"),r=a.n(n),i=a("P9l9"),s=a("NYxO"),c=a("sxQs"),d=a("hmat"),p=a("oAV5"),m={data:function(){return{pageSize:10,currentPage:1,isSearchLoading:!1,columns:[{label:"排名",prop:"index",width:60},{label:"载体名称",prop:"merchantName",width:200},{label:"载体级别",prop:"canteenLevel"},{label:"服务商名称",prop:"companyName"},{label:"服务老年人数（人）",prop:"peopleTotal",width:150},{label:"服务量（客次）",prop:"serviceTotal"},{label:"消费金额（元）",prop:"amountCollected"},{label:"服务类别",children:[{label:"膳食供应类服务量",prop:"eatTotal"},{label:"生活照料类服务量",prop:"liveTotal"},{label:"医疗康复类服务量",prop:"healthTotal"},{label:"日间托养类服务量",prop:"daytimeTotal"},{label:"其他服务类服务量",prop:"otherTotal"}]},{label:"服务方式",children:[{label:"现场服务量",prop:"siteTotal"},{label:"入户服务量",prop:"dropTotal"}]}],streetData:[],serviceLevel:"",formData:{beginDay:new Date(new Date-24192e5),endDay:new Date,companyName:"",streetCode:"",canteenLevel:""},companyList:[],tableData:[]}},computed:r()({},Object(s.b)(["useName"]),{downloadExcel:function(){var e=this,t="/yanglao-api/freeOrderInfo/export?";return l()(this.formData).forEach(function(a,o){t+=e.formData[a]?a+"="+e.formData[a]+"&":""}),console.log(t.slice(0,-1)),t.slice(0,-1)}}),watch:{useName:function(e){this.getOtherPageList(this.useName,this.roleid)}},created:function(){var e=this;this.roleid=window.localStorage.getItem("roleid"),this.$store.dispatch("getUserAuthInfo").then(function(){e.getServiceConditionInfo()}).catch(function(e){console.log("获取用户权限失败",e)}),i.a.getStreetInfo().then(function(t){t&&(e.streetData=t)}),this.getOtherPageList(this.useName,this.roleid),this.formData.beginDay=Object(p.b)(this.formData.beginDay),this.formData.endDay=Object(p.b)(this.formData.endDay)},methods:{getOtherPageList:function(e,t){var a=this;this.companyList=[],i.a.getOtherPageList({page:1,pageSize:12,companyName:e,roleId:t}).then(function(e){e.obj&&(e.obj.records.map(function(e){return a.companyList.push(e.companyName)}),a.formData.companyName=a.companyList.length>1?"":a.companyList[0])})},getServiceConditionInfo:function(){var e=this;this.isSearchLoading=!0,this.formData.canteenLevel=this.serviceLevel.join(","),i.a.getServiceConditionInfo(this.formData).then(function(t){if(t&&t.data){e.isSearchLoading=!1;var a=t.data,o=a.serviceConditionMap,l=a.serviceConditionSumMap;l&&o&&o.unshift({companyName:"总计",peopleTotal:l[0].peopleTotal,serviceTotal:l[0].serviceTotal,amountCollected:l[0].amountCollected,eatTotal:l[0].eatTotal,liveTotal:l[0].liveTotal,healthTotal:l[0].healthTotal,daytimeTotal:l[0].daytimeTotal,otherTotal:l[0].otherTotal,siteTotal:l[0].siteTotal,dropTotal:l[0].dropTotal}),e.tableData=o||[],e.tableData.map(function(e,t){e.index=t})}})},handleGetSearchValue:function(){this.getServiceConditionInfo()},objectSpanMethod:function(e){e.row,e.column;var t=e.rowIndex,a=e.columnIndex;if(0===t){return{rowspan:1,colspan:[0,0,0,4,1,1,1,1,1,1,1,1,1,1][a]}}},clearSearchValue:function(){this.formData={beginDay:"",endDay:"",companyName:"",canteenLevel:"",streetCode:""}}},components:{ListLayout:c.a,Menu:d.a}},u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("list-layout",{attrs:{columns:e.columns,tableData:e.tableData,pageSize:e.pageSize,header:"服务载体服务情况排名表",currentPage:e.currentPage,backPath:"FiveService",title:"五大服务类别数据综合分析————服务载体服务情况排名表",objectSpanMethod:e.objectSpanMethod}},[a("el-form",{attrs:{inline:!0,model:e.formData}},[a("el-form-item",{staticClass:"search_select search_time",attrs:{label:"起始时间："}},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"开始日期"},model:{value:e.formData.beginDay,callback:function(t){e.$set(e.formData,"beginDay",t)},expression:"formData.beginDay"}}),e._v(" "),a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"截止日期"},model:{value:e.formData.endDay,callback:function(t){e.$set(e.formData,"endDay",t)},expression:"formData.endDay"}})],1),e._v(" "),a("el-form-item",{staticClass:"search_select",attrs:{label:"服务载体级别"}},[a("el-select",{attrs:{multiple:"",clearable:"",placeholder:"请选择载体级别"},model:{value:e.serviceLevel,callback:function(t){e.serviceLevel=t},expression:"serviceLevel"}},[a("el-option",{attrs:{label:"街级",value:"街级"}}),e._v(" "),a("el-option",{attrs:{label:"社区级",value:"社区级"}}),e._v(" "),a("el-option",{attrs:{label:"服务站",value:"服务站"}})],1)],1),e._v(" "),a("el-form-item",{staticClass:"search_select",attrs:{label:"服务商"}},[a("el-select",{attrs:{clearable:"",disabled:1===e.companyList.length,placeholder:"请选择服务商"},model:{value:e.formData.companyName,callback:function(t){e.$set(e.formData,"companyName",t)},expression:"formData.companyName"}},e._l(e.companyList,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})}),1)],1),e._v(" "),a("el-form-item",{staticClass:"search_select",attrs:{label:"载体所属街道"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择所属街道"},model:{value:e.formData.streetCode,callback:function(t){e.$set(e.formData,"streetCode",t)},expression:"formData.streetCode"}},e._l(e.streetData,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.code}})}),1)],1)],1),e._v(" "),a("div",{staticClass:"btns_box"},[a("div",{staticClass:"btns_right"},[a("el-button",{staticClass:"btn",on:{click:e.clearSearchValue}},[e._v("重置")]),e._v(" "),a("el-button",{staticClass:"btn",attrs:{icon:"el-icon-search",loading:e.isSearchLoading},on:{click:e.handleGetSearchValue}},[e._v("查询")]),e._v(" "),a("a",{attrs:{href:e.downloadExcel,target:"_blank"}},[a("el-button",{staticClass:"btn"},[e._v("导出")])],1)],1)]),e._v(" "),a("Menu")],1)};u._withStripped=!0;var h={render:u,staticRenderFns:[]},f=h;var v=!1;var b=a("VU/8")(m,f,!1,function(e){v||a("iBdN")},"data-v-9d2ec568",null);b.options.__file="src/views/ServiceCarrierRank/index.vue";t.default=b.exports},iBdN:function(e,t,a){var o=a("FCGi");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);a("rjj0")("1b966650",o,!1,{})}});